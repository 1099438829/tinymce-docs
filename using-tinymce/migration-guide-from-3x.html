---
layout: default
title: Migration Guide From 3x
---

<h4>File structure</h4>
<p>The file structure was changed in the 4.0 release to more closely match other JavaScript projects. All minified files are suffixed with ".min.js" and "editor_plugin" and "editor_theme" was replaced with "plugin" and "theme".</p>
<pre class="js">/tiny_mce/tiny_mce.js -&gt; /tinymce/tinymce.min.js <br />/tiny_mce/tiny_mce_src.js -&gt; /tinymce/tinymce.js <br />/tiny_mce/plugins/&lt;plugin&gt;/editor_plugin.js -&gt; /tinymce/plugins/&lt;plugin&gt;/plugin.min.js <br />/tiny_mce/plugins/&lt;plugin&gt;/editor_plugin_src.js -&gt; /tinymce/plugins/&lt;plugin&gt;/plugin.js <br />/tiny_mce/theme/&lt;plugin&gt;/editor_template.js -&gt; /tinymce/plugins/&lt;plugin&gt;/theme.min.js <br />/tiny_mce/theme/&lt;plugin&gt;/editor_template_src.js -&gt; /tinymce/plugins/&lt;plugin&gt;/theme.js </pre>
<h4>Removed plugins</h4>
<p>These plugins where removed in 4.0: <a href="/wiki.php/Plugin3x:advhr">advhr</a>, <a href="/wiki.php/Plugin3x:advimage">advimage</a>, <a href="/wiki.php/Plugin3x:advlink">advlink</a>, <a href="/wiki.php/Plugin3x:iespell">iespell</a>, <a href="/wiki.php/Plugin3x:inlinepopups">inlinepopups</a>, <a href="/wiki.php/Plugin3x:style">style</a>, <a href="/wiki.php/Plugin3x:emotions">emotions</a>&nbsp;and <a href="/wiki.php/Plugin3x:xhtmlxtras">xhtmlxtras</a>.</p>
<h4>New plugins</h4>
<p>These are the new plugins in 4.0: <a href="/wiki.php/Plugin:anchor">anchor</a>, <a href="/wiki.php/Plugin:charmap">charmap</a>, <a href="/wiki.php/Plugin:compat3x">compat3x</a>, <a href="/wiki.php/Plugin:hr">hr</a>, <a href="/wiki.php/Plugin:image">image</a>, <a href="/wiki.php/Plugin:link">link</a>, <a href="/wiki.php/Plugin:emoticons">emoticons</a>, <a href="/wiki.php/Plugin:code">code</a> and <a href="/wiki.php/Plugin:textcolor">textcolor</a>.</p>
<h4>Removed themes</h4>
<p>The "simple" and "advanced" themes where removed in 4.0.</p>
<h4>New themes</h4>
<p>The new "modern" theme was introduced in 4.0. More themes will be added in the future.</p>
<h4>Event handling</h4>
<p>TinyMCE 4.0 has a new way of binding events. Instead of the old dispatcher method it uses the more common "on" and "off" like for example jQuery. It also allows you to bind multiple events and cancel events using the more common preventDefault and stopPropagation. Check the <a href="/wiki.php/api4:class.tinymce.Editor">API documentation</a> for a full list of events.</p>
<pre class="js">// Old event<br />editor.onInit(editor, args) {<br />    // Custom logic<br />});<br /><br />// New event<br />editor.on('init', function(args) {<br />    // Custom logic<br />});</pre>
<h4>User interface</h4>
<p>The user interface logic has been changed compleatly in 4.0. Though the more easier methods of adding buttons and windows are the same more complex controls or dialogs needs to be written in the new API style.</p>
<h3>Control states</h3>
<p>Each control in TinyMCE 4 is supposed to be an self contained unit. This enables controls to be created at multiple locations in the UI. So the old controlManager with fixed names has been removed.</p>
<pre class="js">// This is how control states used to function in the 3.x UI API<br />editor.onNodeChange.add(function(editor, controlManager, node) {<br />&nbsp;&nbsp;&nbsp;&nbsp;controlManager.setActive('SomeButton', node.nodeName == 'A');<br />});</pre>
<pre class="js">// In TinyMCE 4 you can use the simpler stateSelector setting<br />editor.addButton('SomeButton', {<br />&nbsp;&nbsp;&nbsp;&nbsp;text: 'My button',<br />&nbsp;&nbsp;&nbsp;&nbsp;stateSelector: 'a'<br />});<br /><br />// Or you can use custom logic using the "nodechange" event<br />editor.addButton('SomeButton', {<br />    text: 'My button',<br />&nbsp;&nbsp;&nbsp;&nbsp;onPostRender: function() {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var ctrl = this;<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ed.on('NodeChange', function(e) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctrl.active(e.element.nodeName == 'A');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />});</pre>
<h3>Dialogs/Windows</h3>
<p>In TinyMCE 3.x all dialogs where HTML files loaded in iframes or separate windows. In 4.x all windows are DIV elements placed onto the same page as the editor. You can however still load pages into iframe based windows.</p>
<pre class="js">// Open URL based window<br />editor.windowManager.open({<br />&nbsp;&nbsp;&nbsp;&nbsp;title: "My dialog",<br />&nbsp;&nbsp;&nbsp;&nbsp;width: 500,<br />&nbsp;&nbsp;&nbsp;&nbsp;height: 400,<br />&nbsp;&nbsp;&nbsp;&nbsp;url: "somepage.html"<br />}, {<br />&nbsp;&nbsp;&nbsp;&nbsp;someArg: "someValue"<br />});</pre>
<p>Here are some examples on how to extract parameters passed to windows and closing windows inside your "somepage.html" code.</p>
<pre class="js">// Get someArg value inside iframe dialog<br />var someArg = top.tinymce.activeEditor.windowManager.getParams().someArg;<br /><br />// Close the top most window<br />top.tinymce.activeEditor.windowManager.close();</pre>
<h4>HTML5 output</h4>
<p>TinyMCE produces HTML5 loose output as of 4.0. This means it can handle all new HTML5 elements and also allow the deprecated HTML4 attributes and elements. If you want to use html4 or html5-strict output check the <a href="/wiki.php/Configuration:schema">schema</a> option for details.</p>
<h4>Using the compat3x plugin</h4>
<p>As a last resort one can use the <a href="/wiki.php/Plugin:compat3x">compat3x plugin</a>&nbsp;it mimic parts of the 3.x API contains a few files removed from 4.x. We only recommend this as a last resort and it won't work for all plugins. But most plugins should work right out of the box we tested it with some of our own old 3.x plugins.</p>